# Archive@Home API 文档

服务端 API 运行在端口 `3028`。

## 公共响应格式

```json
{
  "code": 0,
  "msg": "string",
  "data": {}
}
```

---

## 接口列表

| 接口 | 方法 | 说明 |
|------|------|------|
| `/resolve` | POST | 解析画廊链接 |
| `/balance` | POST | 查询 GP 余额 |
| `/checkin` | POST | 每日签到 |

---

## 1. `/resolve` - 解析画廊链接

**方法**：POST

**请求参数**：

| 参数名         | 类型    | 必填 | 描述             |
|----------------|---------|------|------------------|
| apikey         | string  | 是   | 用户的 API Key   |
| gid            | string  | 是   | 画廊 ID          |
| token          | string  | 是   | 画廊 token       |
| force_resolve  | boolean | 否   | 是否强制重新解析 |

**响应示例**：

```json
{
  "code": 0,
  "msg": "解析成功",
  "data": {
    "archive_url": "https://..."
  }
}
```

**错误码说明**：

| 错误码 | 含义             |
|--------|------------------|
| 0      | 解析成功         |
| 1      | 参数不完整       |
| 2      | 无效的 API Key   |
| 3      | 用户被封禁       |
| 4      | 获取画廊信息失败 |
| 5      | GP 不足          |
| 6      | 解析失败         |
| 99     | 服务器内部错误   |

---

## 2. `/balance` - 查询当前 GP

**方法**：POST

**请求参数（JSON）**：

| 参数名 | 类型   | 必填 | 描述           |
|--------|--------|------|----------------|
| apikey | string | 是   | 用户的 API Key |

**响应示例**：

```json
{
  "code": 0,
  "msg": "查询成功",
  "data": {
    "current_GP": 1000
  }
}
```

**错误码说明**：

| 错误码 | 含义             |
|--------|------------------|
| 0      | 查询成功         |
| 1      | 参数不完整       |
| 2      | 无效的 API Key   |
| 3      | 用户被封禁       |
| 99     | 服务器内部错误   |

---

## 3. `/checkin` - 每日签到获取 GP

**方法**：POST

**请求参数（JSON）**：

| 参数名 | 类型   | 必填 | 描述           |
|--------|--------|------|----------------|
| apikey | string | 是   | 用户的 API Key |

**响应示例（成功签到）**：

```json
{
  "code": 0,
  "msg": "签到成功",
  "data": {
    "get_GP": 100,
    "current_GP": 1100
  }
}
```

**响应示例（已签到）**：

```json
{
  "code": 7,
  "msg": "今日已签到",
  "data": {}
}
```

**错误码说明**：

| 错误码 | 含义             |
|--------|------------------|
| 0      | 签到成功         |
| 1      | 参数不完整       |
| 2      | 无效的 API Key   |
| 3      | 用户被封禁       |
| 7      | 今日已签到       |
| 99     | 服务器内部错误   |
